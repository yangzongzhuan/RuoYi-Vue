<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.system.mapper.SysPdfFileMapper">
    <resultMap type="SysPdfFile" id="SysPdfFileResult">
        <id     property="pdfId"        column="pdf_id"         />
        <result property="pdfTitle"     column="pdf_title"      />
        <result property="pdfDescription" column="pdf_description" />
        <result property="pdfPath"      column="pdf_path"       />
        <result property="originalFilename" column="original_filename" />
        <result property="pdfSize"      column="pdf_size"       />
        <result property="pageCount"    column="page_count"     />
        <result property="status"       column="status"         />
        <result property="createBy"     column="create_by"      />
        <result property="createTime"   column="create_time"    />
        <result property="updateBy"     column="update_by"      />
        <result property="updateTime"   column="update_time"    />
        <result property="remark"       column="remark"         />
    </resultMap>

    <sql id="selectPdfFileVo">
        select pdf_id, pdf_title, pdf_description, pdf_path, original_filename, pdf_size, page_count, status, create_by, create_time, update_by, update_time, remark 
        from sys_pdf_file
    </sql>

    <select id="selectPdfFileById" parameterType="Long" resultMap="SysPdfFileResult">
        <include refid="selectPdfFileVo" />
        where pdf_id = #{pdfId}
    </select>

    <select id="selectPdfFileList" parameterType="SysPdfFile" resultMap="SysPdfFileResult">
        <include refid="selectPdfFileVo" />
        <where>
            <if test="pdfTitle != null and pdfTitle != ''">
                AND pdf_title like concat('%', #{pdfTitle}, '%')
            </if>
            <if test="status != null and status != ''">
                AND status = #{status}
            </if>
            <if test="beginTime != null">
                AND date_format(create_time,'%y%m%d') &gt;= date_format(#{beginTime},'%y%m%d')
            </if>
            <if test="endTime != null">
                AND date_format(create_time,'%y%m%d') &lt;= date_format(#{endTime},'%y%m%d')
            </if>
        </where>
    </select>

    <insert id="insertPdfFile" parameterType="SysPdfFile" useGeneratedKeys="true" keyProperty="pdfId">
        insert into sys_pdf_file
        (pdf_title, pdf_path, status
        <if test="pdfDescription != null and pdfDescription != ''">, pdf_description</if>
        <if test="originalFilename != null and originalFilename != ''">, original_filename</if>
        <if test="pdfSize != null">, pdf_size</if>
        <if test="pageCount != null">, page_count</if>
        <if test="createBy != null and createBy != ''">, create_by</if>
        <if test="createTime != null">, create_time</if>
        <if test="updateBy != null and updateBy != ''">, update_by</if>
        <if test="updateTime != null">, update_time</if>
        <if test="remark != null and remark != ''">, remark</if>
        )
        values (#{pdfTitle}, #{pdfPath}, #{status}
        <if test="pdfDescription != null and pdfDescription != ''">, #{pdfDescription}</if>
        <if test="originalFilename != null and originalFilename != ''">, #{originalFilename}</if>
        <if test="pdfSize != null">, #{pdfSize}</if>
        <if test="pageCount != null">, #{pageCount}</if>
        <if test="createBy != null and createBy != ''">, #{createBy}</if>
        <if test="createTime != null">, #{createTime}</if>
        <if test="updateBy != null and updateBy != ''">, #{updateBy}</if>
        <if test="updateTime != null">, #{updateTime}</if>
        <if test="remark != null and remark != ''">, #{remark}</if>
        )
    </insert>

    <update id="updatePdfFile" parameterType="SysPdfFile">
        update sys_pdf_file
        <set>
            <if test="pdfTitle != null and pdfTitle != ''">pdf_title = #{pdfTitle},</if>
            <if test="pdfDescription != null and pdfDescription != ''">pdf_description = #{pdfDescription},</if>
            <if test="pdfPath != null and pdfPath != ''">pdf_path = #{pdfPath},</if>
            <if test="originalFilename != null and originalFilename != ''">original_filename = #{originalFilename},</if>
            <if test="pdfSize != null">pdf_size = #{pdfSize},</if>
            <if test="pageCount != null">page_count = #{pageCount},</if>
            <if test="status != null and status != ''">status = #{status},</if>
            <if test="updateBy != null and updateBy != ''">update_by = #{updateBy},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
            <if test="remark != null and remark != ''">remark = #{remark},</if>
        </set>
        where pdf_id = #{pdfId}
    </update>

    <delete id="deletePdfFileById" parameterType="Long">
        delete from sys_pdf_file where pdf_id = #{pdfId}
    </delete>

    <delete id="deletePdfFileByIds" parameterType="Long[]">
        delete from sys_pdf_file where pdf_id in
        <foreach item="pdfId" collection="array" open="(" separator="," close=")">
            #{pdfId}
        </foreach>
    </delete>
</mapper>